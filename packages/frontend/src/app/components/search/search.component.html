<div class='search' [class._focused]='dropdownVisible'>
  <div class='search__input'>
    <input #input
           (focus)='dropdownVisible = !!searchValue; input.classList.add("_gray")'
           (blur)='input.classList.remove("_gray")'
           [(ngModel)]='searchValue'
           (ngModelChange)='searchValueChange($event)'
           class='icon-search'
           type='text'
           [placeholder]='placeholder' />
    <span *ngIf='!!searchValue' class='icon-hover-style-circle search__icon'>
      <button (click)='searchValue = ""' class='icon-hover-style-circle__button'>
        <img class='icon-11px' src='assets/icons/icon-close.svg' alt='icon-close' />
      </button>
    </span>
  </div>

  <div class='search__result divide-line-top'>
    <ul class='search__result-list'>
      <li class='search__result-list-item'>
        <button #button (click)='searchEntitySelect(button.innerText, "global")' class='icon-search _gray'>
          {{ searchValue }} <span class='color-gray' i18n='@@global_search'>— поиск по всему сайту</span>
        </button>
      </li>
    </ul>

    <ul *ngIf='filteredCitiesNames.length' class='search__result-list'>
      <h3 i18n='@@cities_search' class='search__result-list-heading'>Поиск в городах</h3>
      <li *ngFor='let cityName of filteredCitiesNames' class='search__result-list-item'>
        <button #button (click)='searchEntitySelect(button.innerText, "city")' class='icon-search _gray'
                [innerHTML]='cityName'>
        </button>
      </li>
    </ul>


    <ul *ngIf='categoriesNames.length' class='search__result-list'>
      <h3 i18n='@@categories_search' class='search__result-list-heading'>Поиск в категориях</h3>
      <li *ngFor='let categoryName of categoriesNames' class='search__result-list-item'>
        <button (click)='searchEntitySelect(categoryName, "category")' class='icon-search _gray'>
          {{ searchValue }} <span class='color-gray' i18n='@@in_category'>в категории {{ categoryName }}</span>
        </button>
      </li>
    </ul>
  </div>
</div>
